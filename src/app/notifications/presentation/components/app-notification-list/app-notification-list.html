<!-- app-notification-list.html -->
<div class="notification-badge"
     [class.has-notifications]="unreadCount > 0"
     (click)="toggleNotifications()">

  <!-- Icono de campana con contador -->
  <div class="bell-icon">
    ðŸ””
    <span *ngIf="unreadCount > 0" class="badge">
      {{ unreadCount > 99 ? '99+' : unreadCount }}
    </span>
  </div>

  <!-- Panel desplegable de notificaciones -->
  <div *ngIf="showPanel" class="notifications-panel">
    <div class="panel-header">
      <h4>Alertas - VehÃ­culo {{vehicleId}}</h4>
      <button (click)="markAllAsRead()" *ngIf="unreadCount > 0" class="mark-all-btn">
        Marcar todas
      </button>
      <button (click)="toggleNotifications()" class="close-btn">Ã—</button>
    </div>

    <div class="connection-status" [class.connected]="isConnected">
      {{ isConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected' }}
    </div>

    <div class="notifications-list">
      <div *ngFor="let notif of vehicleNotifications"
           class="notification-item"
           [class.unread]="!notif.read"
           [class]="'severity-' + notif.severity.toLowerCase()">

        <div class="notification-content">
          <div class="notification-header">
            <strong>{{ notif.title }}</strong>
            <span class="notification-time">
              {{ notif.createdAt | date:'shortTime' }}
            </span>
          </div>
          <p class="notification-message">{{ notif.message }}</p>
        </div>

        <button *ngIf="!notif.read"
                (click)="markAsRead(notif.id); $event.stopPropagation()"
                class="mark-read-btn">
          âœ“
        </button>
      </div>

      <div *ngIf="vehicleNotifications.length === 0" class="empty-state">
        There are no notifications for this vehicle.
      </div>
    </div>
  </div>
</div>
